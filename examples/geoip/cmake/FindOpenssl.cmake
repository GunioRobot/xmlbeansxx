if (WIN32)
  if (CMAKE_BUILD_TYPE STREQUAL Debug) 
    set(LIB_SUF "d")
  endif (CMAKE_BUILD_TYPE STREQUAL Debug) 
else (WIN32) 
  set(LIB_SUF "")
endif (WIN32)

FIND_PATH(OPENSSL_INCLUDE_DIR openssl/ssl.h /usr/include /usr/local/include)
if (WIN32)
  FIND_LIBRARY(OPENSSL_LIBRARY NAMES libeay32${LIB_SUF} PATHS /usr/lib /usr/local/lib)
else (WIN32)
  FIND_LIBRARY(OPENSSL_LIBRARY NAMES ssl PATHS /usr/lib /usr/local/lib)
endif (WIN32)

IF (OPENSSL_INCLUDE_DIR AND OPENSSL_LIBRARY)
   SET(OPENSSL_FOUND TRUE)
ENDIF (OPENSSL_INCLUDE_DIR AND OPENSSL_LIBRARY)

IF (OPENSSL_FOUND)
   IF (NOT Openssl_FIND_QUIETLY)
      MESSAGE(STATUS "Found OPENSSL: ${OPENSSL_LIBRARY}")
   ENDIF (NOT Openssl_FIND_QUIETLY)
ELSE (OPENSSL_FOUND)
   IF (Openssl_FIND_REQUIRED)
      MESSAGE(FATAL_ERROR "Could not find Openssl")
   ENDIF (Openssl_FIND_REQUIRED)
ENDIF (OPENSSL_FOUND)
